<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[brain's base]]></title><description><![CDATA[My blog.]]></description><link>https://jeffchheng.github.io/brains-base</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 10 Feb 2020 00:14:02 GMT</lastBuildDate><item><title><![CDATA[AWS from a front end engineer's perspective]]></title><description><![CDATA[EC2? ELB? IAM? What? Me: Does anyone want a high level overview of AWS? No one: Me: Oh... Well... I'll do my best to explain things from a…]]></description><link>https://jeffchheng.github.io/brains-base/2020-02-09-aws-from-front-end-perspective/</link><guid isPermaLink="false">https://jeffchheng.github.io/brains-base/2020-02-09-aws-from-front-end-perspective/</guid><pubDate>Sun, 09 Feb 2020 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;EC2? ELB? IAM? What?&lt;/p&gt;
&lt;p&gt;Me: Does anyone want a high level overview of AWS?&lt;/p&gt;
&lt;p&gt;No one:&lt;/p&gt;
&lt;p&gt;Me: Oh... Well... I&apos;ll do my best to explain things from a front end engineer&apos;s perspective anyway. :&apos;(&lt;/p&gt;
&lt;h2&gt;Background&lt;/h2&gt;
&lt;p&gt;I&apos;ve been working on a project to create a template for bootstrapping apps. It&apos;s Next.js and TypeScript with some boilerplate code that handles OAuth, connecting with our microservices, all that. We want devs to build apps and not worry about configs or tooling. Easy peasy.&lt;/p&gt;
&lt;p&gt;Alas, a front end solution isn&apos;t enough, because part of our CI/CD infra is reaching EOL. We don&apos;t want to recommend or build on something that&apos;ll have to be replaced soon. And devops and infra is just difficult to manage for every non-devops engineer in general, so why not make that easy too?&lt;/p&gt;
&lt;p&gt;It took a while, but I eventually got something working that&apos;s much easier to set up and more self-service. Now I&apos;m ready to share all I&apos;ve learned about AWS from the perspective of a front end engineer who initially hated it (and still kind of does).&lt;/p&gt;
&lt;h2&gt;Onward to AWS&lt;/h2&gt;
&lt;p&gt;Here are the tools I&apos;ve landed on for somewhat easy-to-use, self-serve, production-ready, and secure web apps.&lt;/p&gt;
&lt;h3&gt;CodeStar&lt;/h3&gt;
&lt;p&gt;The template is based on CodeStar.&lt;/p&gt;
&lt;p&gt;It&apos;s an all-in-one solution by AWS that will provision resources, create a pipeline, create access roles for its service workers, and so on.&lt;/p&gt;
&lt;p&gt;An admin needs to allow CodeStar access for the entire account, then you simply need someone to add the CodeStar, CodeBuild, CodeDeploy, CodePipeline access policies to your user role and limit the resources to projects under your team&apos;s control, and you&apos;re good to go.&lt;/p&gt;
&lt;h3&gt;CodeBuild, -Deploy, -Pipeline&lt;/h3&gt;
&lt;p&gt;CodeBuild handles building from your source (GitHub or CodeCommit). You can specify environment variables through a fairly easy-to-use console.&lt;/p&gt;
&lt;p&gt;CodeDeploy handles &quot;deployment groups&quot; (i.e., the environments you want to deploy an app, such as test, staging, and prod).&lt;/p&gt;
&lt;p&gt;CodePipeline ties your source control, build, and deploy into one neat pipeline. You can add actions for test, staging, and prod. One stage flows into the next until everything&apos;s done.&lt;/p&gt;
&lt;h3&gt;CloudFormation&lt;/h3&gt;
&lt;p&gt;CodeStar automatically creates a template.yml. In the template, you describe resources you want like &quot;a small server,&quot; &quot;route my traffic to a pretty URL,&quot; &quot;these&apos;re my certifates,&quot; &quot;only let these IPs access my app,&quot; etc.&lt;/p&gt;
&lt;p&gt;CloudFormation takes that template, compares it with your previous template, and it creates, updates, or deletes the resources you&apos;ve added, changed, or removed.&lt;/p&gt;
&lt;p&gt;It&apos;s declarative, like React. However, you have to be careful and delibrate when updating the template, or you can confuse CloudFormation, which will require your devops team or AWS support to fix it for you.&lt;/p&gt;
&lt;p&gt;My rule of them here has been to take things slow and never change the template or retry failed changes until a rollback has completed.&lt;/p&gt;
&lt;h3&gt;VPC - Virtual Private Cloud&lt;/h3&gt;
&lt;p&gt;I&apos;ll be honest: I don&apos;t really know how this works. To my knowledge, you have a VPC that sections off your part of the Amazon cloud. So you physically share AWS resources with other companies, but they&apos;re logically separated.&lt;/p&gt;
&lt;p&gt;Then there are subnets that specify IP ranges that can access to your resources. For example, you can have a private subnet that only allows internal traffic on your company&apos;s network/VPN, in addition to a public subnet for external-facing sites.&lt;/p&gt;
&lt;p&gt;These can be further limited by security groups, so only resources internal to your section of the cloud can access it.&lt;/p&gt;
&lt;p&gt;This is the part I know the least about AWS. I&apos;m glad our devops team figured all this out, and I just get to use it.&lt;/p&gt;
&lt;h3&gt;Route 53&lt;/h3&gt;
&lt;p&gt;DNS names and forwarding!&lt;/p&gt;
&lt;p&gt;Here you can define something like &lt;code class=&quot;language-text&quot;&gt;*.company.com&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;*.internalonly.com&lt;/code&gt;. When someone sets up a record like &lt;code class=&quot;language-text&quot;&gt;accounts.internalonly.com&lt;/code&gt;, it will only forward traffic from internal IPs.&lt;/p&gt;
&lt;h3&gt;EC2 - Elastic Cloud Compute&lt;/h3&gt;
&lt;p&gt;You rent servers (instances) from Amazon and pay per hour of use.&lt;/p&gt;
&lt;p&gt;You can limit access through the VPC, subnets, and security groups. As far as I can tell, you can&apos;t even access an EC2 instance with a public IP if it&apos;s on a private subnet. Still, I&apos;d set a security group to be sure.&lt;/p&gt;
&lt;h3&gt;ELB - Elastic Load Balancing&lt;/h3&gt;
&lt;p&gt;So you have an EC2 instance or many, and they have really hard to remember IPs like &lt;code class=&quot;language-text&quot;&gt;10.0.150.1&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;10.0.160.1&lt;/code&gt;? Setting up an Application Load Balancer (ALB) will handle traffic and pass it to the correct instance. This is helpful if you have instances in multiple geographic locations, and you want to make sure users connect to the fastest one for them.&lt;/p&gt;
&lt;p&gt;You have a listener on the ALB for traffic on port 443 with an SSL certificate, for example. You define a target group as the EC2 instance&apos;s port 80 (where your app is running).&lt;/p&gt;
&lt;p&gt;Finally, you need to define a Route 53 record set that describes your hosted zone (e.g., &lt;code class=&quot;language-text&quot;&gt;internalonly.com&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;company.com&lt;/code&gt;) and the actual name you want like &lt;code class=&quot;language-text&quot;&gt;accounts.internalonly.com&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;When someone hits &lt;code class=&quot;language-text&quot;&gt;https://accounts.internalonly.com&lt;/code&gt;,&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Route 53 sees a matching set&lt;/li&gt;
&lt;li&gt;It forwards traffic to the ALB&lt;/li&gt;
&lt;li&gt;ALB sees you&apos;re hitting port 443 (HTTPS) that it&apos;s listening for&lt;/li&gt;
&lt;li&gt;It forwards that to the best EC2 instance it can (the target group)&lt;/li&gt;
&lt;li&gt;EC2 instance handles it, and returns the response back up the chain&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;IAM - Identity and Access Management&lt;/h3&gt;
&lt;p&gt;How do you allow/deny access to certain things? That&apos;s IAM. It keeps track of roles and policies.&lt;/p&gt;
&lt;p&gt;A role can be something like job role &quot;senior-developer&quot; or &quot;junior-developer,&quot; or it can be team-based like &quot;team-edward&quot; or &quot;team-jacob.&quot;&lt;/p&gt;
&lt;p&gt;Policies describe four things:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Action&lt;/code&gt; - what you can do (e.g., run an EC2 instance, create a traffic forwarding rule)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Resource&lt;/code&gt; - what you can use (e.g., only allow internal subnets or hosted zones to be used)&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Effect&lt;/code&gt; - whether you&apos;re allowed or denied access to the above&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Condition&lt;/code&gt; - pattern matching conditional (e.g., you can only run micro or small EC2 instances)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;In this way, you can make sure only admins can wholesale delete resources and let something like CodeStar manage resources it has created. Devs should generally describe what they want in a CloudFormation template and let AWS take care of the rest.&lt;/p&gt;
&lt;p&gt;For example, here&apos;s a reusable policy to limit what subnets CodeStar can run an EC2 instance on:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ec2:RunInstances&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:subnet/subnet-SUBNET_ID_01&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:subnet/subnet-SUBNET_ID_02&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:subnet/subnet-SUBNET_ID_03&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:subnet/subnet-SUBNET_ID_04&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:network-interface/*&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:instance/*&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:volume/*&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*::image/ami-*&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:key-pair/*&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:ec2:*:*:security-group/*&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;Condition&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;StringEquals&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;ec2:InstanceType&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;t2.nano&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;t2.micro&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;t2.small&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This prevents someone from creating a CodeStar template that is hosted on an internet-facing EC2 instance that anyone can access by default. It also prevents them from using expensive instances. AWS doesn&apos;t allow limiting the number of resources that can be created by a template, but fingers crossed that&apos;s coming soon.&lt;/p&gt;
&lt;p&gt;Then there&apos;s this template that will prevent someone from forwarding traffic from an internal instance an external ALB.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:GetChange&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:GetHostedZone&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:ListHostedZones&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:ListHostedZonesByName&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:ListResourceRecordSets&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:GetHostedZoneCount&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53domains:*&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;*&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:ChangeResourceRecordSets&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;route53:ListResourceRecordSets&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;apigateway:GET&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:route53:::hostedzone/HOSTED_ZONE_ID&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;arn:aws:apigateway:*::/domainnames&quot;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By adding these policies and &lt;code class=&quot;language-text&quot;&gt;ElasticLoadBalancingFullAccess&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;CodeStarWorker-MY_APP-CloudFormation&lt;/code&gt;, you&apos;ll be able to create internal-only EC2 instances and ALBs via CodeStar. No one but rogue admins would be able to allow access otherwise.&lt;/p&gt;
&lt;h2&gt;Final thoughts&lt;/h2&gt;
&lt;p&gt;AWS is super complicated, but I&apos;m glad they&apos;re taking steps to create more complete solutions like CodeStar that abstracts a lot of the complicated stuff away.&lt;/p&gt;
&lt;p&gt;Sure, it&apos;s not a completely foolproof solution, but it&apos;s a good starting point for people like me who had no idea how to get started otherwise. By using CodeStar as a base, I&apos;m able to explore solutions that make sense in context instead of having all of AWS thrown at me.&lt;/p&gt;
&lt;p&gt;I hope you all found my explanations of AWS tools and concepts helpful and not &lt;em&gt;too&lt;/em&gt; inaccurate. &lt;/p&gt;</content:encoded></item><item><title><![CDATA[November, December, January Movie Roundup]]></title><description><![CDATA[Going through the movies I watched in the last few months. Frozen II (November 30) 65 on Metacritic I enjoyed the untraditional story…]]></description><link>https://jeffchheng.github.io/brains-base/2020-01-17-movie-roundup/</link><guid isPermaLink="false">https://jeffchheng.github.io/brains-base/2020-01-17-movie-roundup/</guid><pubDate>Fri, 17 Jan 2020 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Going through the movies I watched in the last few months.&lt;/p&gt;
&lt;h2&gt;Frozen II (November 30)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.metacritic.com/movie/frozen-ii&quot;&gt;65 on Metacritic&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I enjoyed the untraditional story telling of &lt;em&gt;Frozen II&lt;/em&gt;. There wasn&apos;t a typical &quot;villain&quot; here, and the twist was telegraphed from miles away. What was untraditional was that the &quot;antagonist&quot; in this story, which was a wrong from the past that had to be righted.&lt;/p&gt;
&lt;p&gt;Some of my gribes were about some of the consequences, or lack thereof. There were three major consequences in the movie, and all of them were reversed by the end. At least &lt;em&gt;one&lt;/em&gt; should&apos;ve stuck to make the stakes seem real. One could&apos;ve lead naturally into a great ending montage of everyone coming together.&lt;/p&gt;
&lt;p&gt;Overall, I enjoyed it. The trailers made it look like a better adventure than it was.&lt;/p&gt;
&lt;h2&gt;Last Christmas (December 1)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.metacritic.com/movie/last-christmas&quot;&gt;50 on Metacritic&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Not much to say about this one other than it was a fun, cheesy Christmas movie.&lt;/p&gt;
&lt;p&gt;Emilia Clarke and Henry Golding had fantastic chemistry. The supporting cast was hilarious throughout. If you want an uplifting, sentimental Christmas story, this is the one for you.&lt;/p&gt;
&lt;p&gt;My only complaint was that the final third was really cramed, and it kind of went over-the-top with the cheese.&lt;/p&gt;
&lt;h2&gt;Knives Out (December 4)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.metacritic.com/movie/knives-out&quot;&gt;82 on Metacritic&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;An aboslute blast of a film. The story is so tight. Not a single moment was wasted. Rian Johnson takes the usual whodunnit genre and turns it on its head in the first 20 minutes.&lt;/p&gt;
&lt;p&gt;It&apos;s so entertaining that I think a second watch is worth it to catch all the little details. &lt;a href=&quot;https://knivesout.movie/#commentary&quot;&gt;Rian Johnson even has an audio commentary&lt;/a&gt; that you can listen to while watching it in theaters.&lt;/p&gt;
&lt;h2&gt;A Beautiful Day in the Neighborhood (December 5)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.metacritic.com/movie/a-beautiful-day-in-the-neighborhood&quot;&gt;80 on Metacritic&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is more of a story how Mr. Rogers affected one reporter&apos;s life than a biopic, and it&apos;s a touching story. There&apos;s not much to say other than that the world could really use his brand of wholesomeness and earnesty.&lt;/p&gt;
&lt;p&gt;It&apos;s verging on Oscat bait, but it&apos;s good Oscar bait if that makes sense.&lt;/p&gt;
&lt;h2&gt;Jumanji: The Next Level (December 16)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.metacritic.com/movie/jumanji-the-next-level&quot;&gt;58 on Metacritic&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Jumanji is a popcorn flick if there ever was one. Unfortunately, the formula is a little stale this time around, and the story is paper thin. The only two redeeming parts of the movie are Jack Black and Kevin Hart, who are hilarious throughout. A surprisingly large role from Awkwafina was also welcome. It&apos;s clear the Rock can&apos;t act, so he just hams it up.&lt;/p&gt;
&lt;h2&gt;Star Wars: The Rise of Skywalker (December 19)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.metacritic.com/movie/star-wars-episode-ix---the-rise-of-skywalker&quot;&gt;54 on Metacritic&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;By far one of the dumbest movies of all time. It gets dumber the more you think about it, too. It really proves that JJ Abrams is an uninspired hack who tries to mimic greatness instead of creating his own. And in doing so, he missings the point completely on half the things he emulates.&lt;/p&gt;
&lt;p&gt;I still enjoy 7 and 8, but 9 is the worst conclusion to what the previous two movies set up.&lt;/p&gt;
&lt;h2&gt;Little Women (2019) (January 12)&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.metacritic.com/movie/little-women-2019&quot;&gt;91 on Metacritic&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A thoroughly enjoyable film for the whole family. The worst thing I can say is that a few actors&apos; accents slipped up, but other than that, every performance was amazing. Apparently some people didn&apos;t like the non-linear storytelling; however, I thought it did well to keep things interesting, and it serves to juxtapose what happened in the past versus what happened later in their lives.&lt;/p&gt;
&lt;h2&gt;Final thoughts&lt;/h2&gt;
&lt;p&gt;Shout-outs to Regal Unlimited. Without it, I wouldn&apos;t&apos;ve gone to see so many movies.&lt;/p&gt;
&lt;p&gt;I thought about going to see &lt;em&gt;Cats&lt;/em&gt;, but after watching the trailer, I don&apos;t think I can stomach it, even for the price of free. It looks like a massive waste of time, and I derive some pleasure seeing it flop so massively.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Anime of the Year, Every Year of the Decade]]></title><description><![CDATA[AKA the one anime I watched each year. 2010: Katanagatari  It's been a while since I watched this. The biggest standouts were the sharp art…]]></description><link>https://jeffchheng.github.io/brains-base/2019-12-29-anime-of-the-decade/</link><guid isPermaLink="false">https://jeffchheng.github.io/brains-base/2019-12-29-anime-of-the-decade/</guid><pubDate>Sun, 29 Dec 2019 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;AKA the one anime I watched each year.&lt;/p&gt;
&lt;h2&gt;2010: Katanagatari&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/brains-base/static/8b0ea3d14a7f9cd93faebc160291fb82/72e01/katanagatari.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAFpKKl0xcT/xAAZEAACAwEAAAAAAAAAAAAAAAABAgADETP/2gAIAQEAAQUCUxLF3VMt51qCrIJ//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEh/9oACAEDAQE/AY1//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEh/9oACAECAQE/Aax//8QAGxABAAICAwAAAAAAAAAAAAAAAQARAiEQMXH/2gAIAQEABj8Cu6I0679htIpMXj//xAAcEAEAAgMAAwAAAAAAAAAAAAABACERMUFhcZH/2gAIAQEAAT8h0ImWO4OvysHxECCJRnESJYSdy88eoRKGttz/2gAMAwEAAgADAAAAEMj/AP/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQMBAT8QOxZNX//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QZGzt/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARIWFxQaHw/9oACAEBAAE/ELdPDr5cfMR9MtJugX34gFQKZnUSPsyausKlvNnsXtwDsBsbM//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Katanagatari&quot;
        title=&quot;Katanagatari&quot;
        src=&quot;/brains-base/static/8b0ea3d14a7f9cd93faebc160291fb82/b4294/katanagatari.jpg&quot;
        srcset=&quot;/brains-base/static/8b0ea3d14a7f9cd93faebc160291fb82/75985/katanagatari.jpg 150w,
/brains-base/static/8b0ea3d14a7f9cd93faebc160291fb82/f93b5/katanagatari.jpg 300w,
/brains-base/static/8b0ea3d14a7f9cd93faebc160291fb82/b4294/katanagatari.jpg 600w,
/brains-base/static/8b0ea3d14a7f9cd93faebc160291fb82/8e1fc/katanagatari.jpg 900w,
/brains-base/static/8b0ea3d14a7f9cd93faebc160291fb82/72e01/katanagatari.jpg 1024w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;It&apos;s been a while since I watched this. The biggest standouts were the sharp art style, hype music, and memorable main characters. I&apos;ll never forget those final two episodes. It&apos;s one of the few shows with high stakes battles. Worth it for the stylized art direction alone.&lt;/p&gt;
&lt;h2&gt;2011: Steins;Gate&lt;/h2&gt;
&lt;p&gt;Time travel is my favorite trope, so this one&apos;s a no brainer.&lt;/p&gt;
&lt;p&gt;Rintaro Okabe&apos;s esoteric team can be grating to some people, but it only makes the contrast of the second half even starker. This juxtaposition of comedy and despair will be copied by countless shows that come after.&lt;/p&gt;
&lt;h2&gt;2012: Psycho-Pass&lt;/h2&gt;
&lt;p&gt;Sci-fi dystopias are another one of my favorite tropes.&lt;/p&gt;
&lt;p&gt;Psycho-Pass is basically a darker minority report. It&apos;s brutal and doesn&apos;t pull any punches. I like how the villain actually poses a threat to the protagonists and pushes them to their limits. The losses they suffer aren&apos;t superficial either.&lt;/p&gt;
&lt;h3&gt;2012 Runner Up: Fate/Zero, Season 2&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;Fate/Zero&lt;/em&gt; really picks up steam after all the characters and motivations have been set up. &lt;em&gt;Fate/Zero&lt;/em&gt;&apos;s protagonist, Kiritsugu Emiya, is literally that guy who says, &quot;If this was real life, I would do [X] instead of [Y].&quot; He&apos;s such an edge lord, but I love his brutal battlefield tactics.&lt;/p&gt;
&lt;p&gt;He&apos;s contrasted by Saber, the idealist, and it does a lot to set up her character for &lt;em&gt;Unlimited Blade Works&lt;/em&gt;. I always love when there are two main characters with opposing viewpoints.&lt;/p&gt;
&lt;h2&gt;2013: Wolf Children&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/brains-base/static/05f40ad48b3c8cb48bab0282ad33b4a1/d8d7f/wolf-children.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.298449612403104%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAEGBP/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB2ufbFKShX//EABoQAQADAAMAAAAAAAAAAAAAAAEAAgMREiH/2gAIAQEAAQUCvZbujya+Glyd7RZ//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEh/9oACAEDAQE/Aa1//8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BR//EABwQAAEEAwEAAAAAAAAAAAAAAAEAAhAhETFRof/aAAgBAQAGPwIOzQ4qf5FOWzH/xAAdEAEAAgEFAQAAAAAAAAAAAAABABFxITFBUWHh/9oACAEBAAE/IRwujhmWTYXoEFW1v2OUhiP1ol7s/9oADAMBAAIAAwAAABAIz//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxBKGRP/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/ENhZ/8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFRgZGh/9oACAEBAAE/EMJn1luuXw+Q6XYRo9SuKBSilex4Gdiq46xq1BcNXZ//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Wolf Children&quot;
        title=&quot;Wolf Children&quot;
        src=&quot;/brains-base/static/05f40ad48b3c8cb48bab0282ad33b4a1/b4294/wolf-children.jpg&quot;
        srcset=&quot;/brains-base/static/05f40ad48b3c8cb48bab0282ad33b4a1/75985/wolf-children.jpg 150w,
/brains-base/static/05f40ad48b3c8cb48bab0282ad33b4a1/f93b5/wolf-children.jpg 300w,
/brains-base/static/05f40ad48b3c8cb48bab0282ad33b4a1/b4294/wolf-children.jpg 600w,
/brains-base/static/05f40ad48b3c8cb48bab0282ad33b4a1/8e1fc/wolf-children.jpg 900w,
/brains-base/static/05f40ad48b3c8cb48bab0282ad33b4a1/d8d7f/wolf-children.jpg 1032w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I remember watching this with my mom, and she cried the entire time. A story about a single mother raising two eponymous wolf children probably hits parents even harder.&lt;/p&gt;
&lt;p&gt;Mamoru Hosoda is an expert at balancing the whimsical and fantastical elements with universal themes.&lt;/p&gt;
&lt;h2&gt;2014: Love Live! School Idol Project, Season 2&lt;/h2&gt;
&lt;p&gt;I never wanted to watch this show because I thought only creeps and girls were into &lt;em&gt;Love Live&lt;/em&gt;. I don&apos;t remember why, but I eventually started watching it while working out. It was when I was obese, and seeing these nine girls doing their best to achieve their dreams motivated me to go work out every night until I finished the entire series.&lt;/p&gt;
&lt;p&gt;The final episodes and throwbacks to season one were truly incredible. Some of the songs were a little nasally for me, but there were some real bangers like &lt;em&gt;Snow Halation&lt;/em&gt; and &lt;em&gt;START:DASH!!&lt;/em&gt; (never forget). &lt;/p&gt;
&lt;h2&gt;2015: Fate/stay night: Unlimited Blade Works, Season 2&lt;/h2&gt;
&lt;p&gt;Ufotable&apos;s animation is always incredible. And with the story largely set up in season 1, they&apos;re able to barrel toward the thrilling conclusion. For those who haven&apos;t the seen the terrible movie, I envy them for being able to experience one of the greatest twists. Some may disagree with me, but it&apos;s one of my favorite tropes.&lt;/p&gt;
&lt;h3&gt;2015 Honorable Mention: Food Wars!&lt;/h3&gt;
&lt;p&gt;I didn&apos;t actually watch this until recently, but I have to give &lt;em&gt;Food Wars!&lt;/em&gt; a shout-out for being really out there with the anime tropes but still being accessible to the general audience. Just... don&apos;t watch it with your parents or kids.&lt;/p&gt;
&lt;p&gt;Nicole, being a foodie, wanted to watch this, and it was one of the early gateway anime to get her to watch more with me.&lt;/p&gt;
&lt;h2&gt;2016: ERASED&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/b17f8/erased.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHEsksIP//EABkQAAMAAwAAAAAAAAAAAAAAAAABAgMiMf/aAAgBAQABBQLUwqWV3//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/ASf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPwFn/8QAGRAAAQUAAAAAAAAAAAAAAAAAAAEQITFB/9oACAEBAAY/AtFuG//EABcQAAMBAAAAAAAAAAAAAAAAAAABIRH/2gAIAQEAAT8hNxGadFyT/9oADAMBAAIAAwAAABBwL//EABURAQEAAAAAAAAAAAAAAAAAABAx/9oACAEDAQE/ELP/xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAgEBPxCD/8QAGhABAQADAQEAAAAAAAAAAAAAAREAIUExof/aAAgBAQABPxAJK+d6M2+EQhTv3K4KcVz/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;ERASED&quot;
        title=&quot;ERASED&quot;
        src=&quot;/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/b4294/erased.jpg&quot;
        srcset=&quot;/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/75985/erased.jpg 150w,
/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/f93b5/erased.jpg 300w,
/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/b4294/erased.jpg 600w,
/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/8e1fc/erased.jpg 900w,
/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/e5166/erased.jpg 1200w,
/brains-base/static/1f5f736b6f5dbdd5fb4c0f22c7a096bd/b17f8/erased.jpg 1600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Time travel &lt;em&gt;and&lt;/em&gt; a murder mystery? It&apos;s like this show was made for me. &lt;em&gt;ERASED&lt;/em&gt; is one of the greatest thrillers I&apos;ve ever seen. The tension gets almost overbearing as you wonder how some elementary school kids will thwart a serial killer. Even if you guess who the killer is, the premise doesn&apos;t allow for an easy out. You&apos;re stuck watching the tragedy unfold alongside Satoru.&lt;/p&gt;
&lt;h3&gt;2016 Runner Up: My Hero Academia&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;My Hero Academia&lt;/em&gt; is an extremely fun ride with an uplifting theme. Even so, the stakes in this show are real. People die, and heroes are seriously injured or permanently disfigured. The highs of this show surpass the MCU for me, because the fights have context; they&apos;re usually against other heroes or individual villains instead of hordes of CGI monsters.&lt;/p&gt;
&lt;p&gt;This was a tough choice, but the consistently high quality and tight story telling for &lt;em&gt;ERASED&lt;/em&gt; won out for me. As a shonen show, &lt;em&gt;My Hero Academia&lt;/em&gt; does have a lot of recap and wasted moments, unfortunately.&lt;/p&gt;
&lt;h2&gt;2017: Your Name&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/eea4a/your-name.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAv/aAAwDAQACEAMQAAAB20IyHVJCv//EABwQAAIBBQEAAAAAAAAAAAAAAAECEwADESEiMf/aAAgBAQABBQI4N1+aHjMZCxkTaf/EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPwFNn//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ARn/xAAbEAACAQUAAAAAAAAAAAAAAAAAAQIREmJxsf/aAAgBAQAGPwK3ErwRtEkI/8QAGhAAAgMBAQAAAAAAAAAAAAAAAAERITFhQf/aAAgBAQABPyF+PIrg8gPLuEDeEi6LpNeFy9aP/9oADAMBAAIAAwAAABDLH//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAwEBPxAUKRl//8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxBqULdP/8QAHRABAAMAAQUAAAAAAAAAAAAAAQARITFBYXGBkf/aAAgBAQABPxB+8cm5vyVVtJCLtyVo1YaPETZ2tzSQ+JUFMnU8Kvqf/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Your Name&quot;
        title=&quot;Your Name&quot;
        src=&quot;/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/b4294/your-name.jpg&quot;
        srcset=&quot;/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/75985/your-name.jpg 150w,
/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/f93b5/your-name.jpg 300w,
/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/b4294/your-name.jpg 600w,
/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/8e1fc/your-name.jpg 900w,
/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/e5166/your-name.jpg 1200w,
/brains-base/static/c92a8cd5a5d83476907aa942b36780a9/eea4a/your-name.jpg 1280w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I watched &lt;em&gt;Your Name&lt;/em&gt; at least 4 times in theaters, and I noticed something new every single time.&lt;/p&gt;
&lt;p&gt;This movie is a masterclass in editing with the way scenes are cut together serve to set up the premise, convey how Taki and Mitsuha feel, and throw the viewer off the scent. 😉&lt;/p&gt;
&lt;p&gt;The plot is fantastical, yes, but it&apos;s woven tightly. There&apos;s never a dull moment here when each scene is bursting with foreshadowing and beautiful imagery. &lt;/p&gt;
&lt;p&gt;Before this movie, I thought Shinkai was hugely overrated and that there was no way this movie would live up to the hype. But it totally did and then some.&lt;/p&gt;
&lt;h3&gt;2017 Honorable Mention #1: Miss Kobayashi&apos;s Dragon Maid&lt;/h3&gt;
&lt;p&gt;This is such a sweet slice-of-life, comedy show. Despite the eclectic cast of mythological dragons, the show remains very grounded. It&apos;s more about character interactions than anything.&lt;/p&gt;
&lt;p&gt;The standout moment was when I accidentally started watching episode 4 as my first episode. Kanna wanted to go to elementary school and was shopping for school supplies. She wanted a cute keychain but noticed Kobayashi commenting she didn&apos;t have enough money and had to put it on her card. Kanna saw this and put the keychain back. So &lt;em&gt;precious&lt;/em&gt;. 😭😭😭&lt;/p&gt;
&lt;h3&gt;2017 Honorable Mention #2: Recovery of an MMO Junkie&lt;/h3&gt;
&lt;p&gt;Another slice-of-life show that&apos;s super relatable. 2017 seems to be the year of adult-oriented shows with Kobayashi being a software engineer, and Morimori (from &lt;em&gt;Recovery of an MMO Junkie&lt;/em&gt;) being a victim of burnout and workplace harassment.&lt;/p&gt;
&lt;p&gt;It&apos;s a sweet show about finding an escape in video games but also coming to terms with reality.&lt;/p&gt;
&lt;h2&gt;2018: My Hero Academia, Season 3&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/b17f8/my-hero-academia.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 60%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAIA/9oADAMBAAIQAxAAAAHFWnPZVLRL/8QAGxAAAgMAAwAAAAAAAAAAAAAAAQIAAxESITH/2gAIAQEAAQUCCDLRg9l3UKh4qjh//8QAGREAAgMBAAAAAAAAAAAAAAAAAAECERJR/9oACAEDAQE/AYpUbXD/xAAZEQADAAMAAAAAAAAAAAAAAAAAAQIRElH/2gAIAQIBAT8Bu3k1fT//xAAbEAADAAIDAAAAAAAAAAAAAAAAASECESIxQf/aAAgBAQAGPwKvs40mxJFMZ4f/xAAcEAACAwEAAwAAAAAAAAAAAAAAAREhMWFBcaH/2gAIAQEAAT8haWh/BAT69DbtAi3JBca4ZRjwf//aAAwDAQACAAMAAAAQcN//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAEDAQE/EFkcJ4P/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EGXVwpo//8QAHBABAAICAwEAAAAAAAAAAAAAAREhADFBUZFh/9oACAEBAAE/EGN2QVBeJ+7w1O2RGnseYncNArGEPAmtXamTE5a1HfGsB4O6M//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;My Hero Academia&quot;
        title=&quot;My Hero Academia&quot;
        src=&quot;/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/b4294/my-hero-academia.jpg&quot;
        srcset=&quot;/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/75985/my-hero-academia.jpg 150w,
/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/f93b5/my-hero-academia.jpg 300w,
/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/b4294/my-hero-academia.jpg 600w,
/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/8e1fc/my-hero-academia.jpg 900w,
/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/e5166/my-hero-academia.jpg 1200w,
/brains-base/static/e77c60fa0ce992b9b557a937ad38c067/b17f8/my-hero-academia.jpg 1600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;I&apos;m so used to shonen shows not dealing with the consequences of the main character&apos;s actions. Here, Midoriya&apos;s recklessness produces some truly cringe-worthy moments, and it permanently alters his character. That&apos;s what made Season 3 of the most memorable shows of all time.&lt;/p&gt;
&lt;p&gt;A lot of shonen try to stall out character arcs or meaningful progress, but not &lt;em&gt;My Hero Academia&lt;/em&gt;. One of the longest standing threads from season one comes to a definitive close, and sets up the next generation of heroes and stories.&lt;/p&gt;
&lt;h2&gt;2019: Shadowbringers&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 600px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/brains-base/static/5daf57fe451145685a8ee45c5a910d56/6eed6/shadowbringers2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 45.58659217877094%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHBlWxAH//EABcQAAMBAAAAAAAAAAAAAAAAAAABESD/2gAIAQEAAQUCRM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAASAx/9oACAEBAAY/AjVP/8QAGBAAAgMAAAAAAAAAAAAAAAAAESEAASD/2gAIAQEAAT8hAOWpyf/aAAwDAQACAAMAAAAQq8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEBAAIDAAAAAAAAAAAAAAABEQBREEFh/9oACAEBAAE/EBao9awCDDpbiRlvpy5//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Shadowbringers&quot;
        title=&quot;Shadowbringers&quot;
        src=&quot;/brains-base/static/5daf57fe451145685a8ee45c5a910d56/b4294/shadowbringers2.jpg&quot;
        srcset=&quot;/brains-base/static/5daf57fe451145685a8ee45c5a910d56/75985/shadowbringers2.jpg 150w,
/brains-base/static/5daf57fe451145685a8ee45c5a910d56/f93b5/shadowbringers2.jpg 300w,
/brains-base/static/5daf57fe451145685a8ee45c5a910d56/b4294/shadowbringers2.jpg 600w,
/brains-base/static/5daf57fe451145685a8ee45c5a910d56/8e1fc/shadowbringers2.jpg 900w,
/brains-base/static/5daf57fe451145685a8ee45c5a910d56/e5166/shadowbringers2.jpg 1200w,
/brains-base/static/5daf57fe451145685a8ee45c5a910d56/6eed6/shadowbringers2.jpg 1790w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Does this count?&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Shadowbringers&lt;/em&gt; is definitely in my top 2 Final Fantasy stories of all time. The way it treats the Warrior of Light as a real character and humanizes the scheming Ascians fixed two of my biggest complaints about &lt;em&gt;Final Fantasy XIV&lt;/em&gt;&apos;s story.&lt;/p&gt;
&lt;p&gt;Emet-Selch is one of the greatest villains in Final Fantasy history, and I hope other writers learn from Natsuko Ishikawa or that she gets her own game to write.&lt;/p&gt;
&lt;h2&gt;Anime of the Decade: Your Name&lt;/h2&gt;
&lt;p&gt;🎉🎉🎉&lt;/p&gt;
&lt;p&gt;No surprise here. This is the movie/show I&apos;ve rewatched the most and wholeheartedly recommend to everyone. Once again, incredible directing, editing, music, just everything about this movie is nearly perfect. I absolutely adore the story. It has my favorite twists and tropes and everything.&lt;/p&gt;
&lt;p&gt;Go watch it!&lt;/p&gt;
&lt;h2&gt;Final thoughts&lt;/h2&gt;
&lt;p&gt;This decade really flew by. I definitely watched a lot more in the first half than the second half of the decade. I should really change that because I feel like more good shows are coming out, and more people are watching them.&lt;/p&gt;
&lt;p&gt;I look forward to seeing what comes out in the 2020s and the trends that emerge. But please, for the love of God, stop all the isekai shows.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Terrace House - Tokyo 2019-2020, Part 1]]></title><description><![CDATA[Terrace House is back in Tokyo, yay! I finally caught up on Part 1 and wanted to record/share my thoughts on it while they're still fresh…]]></description><link>https://jeffchheng.github.io/brains-base/2019-10-16-terrace-house-tokyo/</link><guid isPermaLink="false">https://jeffchheng.github.io/brains-base/2019-10-16-terrace-house-tokyo/</guid><pubDate>Wed, 16 Oct 2019 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Terrace House is back in Tokyo, yay! I finally caught up on Part 1 and wanted to record/share my thoughts on it while they&apos;re still fresh.&lt;/p&gt;
&lt;p&gt;First off, I like that it&apos;s in Tokyo. The last series I finished was &quot;Aloha State,&quot; where the language and physical barriers were a bit too much. More than half the cast couldn&apos;t find regular work because they can&apos;t speak English at a native level, even though Hawaii does have a good-sized Japanese-speaking population.&lt;/p&gt;
&lt;p&gt;By having it in Tokyo, you can have normal* Japanese people who can go about their lives in between house/date segments. The density and transportation in Tokyo also allows for tons of variety in big-city places. So far, I&apos;ve enjoyed all the different restaurants, bars, and venues they&apos;ve gone to.&lt;/p&gt;
&lt;p&gt;(*Normal insomuch a participant of a reality TV show could be.)&lt;/p&gt;
&lt;p&gt;Second, I love the increased focus on the panel. The segments feel a little longer, so they have time to craft and show silly bits.&lt;/p&gt;
&lt;p&gt;They&apos;ve really hit their stride, and the rapport is great; Baba is talking now, Triendl/Torichan has taken on a leading role, and Yamasato is the butt of even more Virgin-at-Heart jokes. &lt;/p&gt;
&lt;h2&gt;Main Cast&lt;/h2&gt;
&lt;p&gt;Let&apos;s move onto my thoughts about the main cast.&lt;/p&gt;
&lt;h3&gt;Kaori Watanabe, 28, illustrator&lt;/h3&gt;
&lt;p&gt;Initial impression: shy, insecure, humble, driven.&lt;/p&gt;
&lt;p&gt;Early on, I saw her deflecting and self-deprecating a lot, despite her achievements. She went to a great school and worked at a great company before giving all that up to pursue her passion: art.&lt;/p&gt;
&lt;p&gt;She doesn&apos;t like to toot her own horn, but I think she does take great pride in her work. Hearing her old professor criticize her or work not meeting her expectations really cuts deep. I don&apos;t blame her though. The cultural implications and stress of making it on your own is probably overwhelming.&lt;/p&gt;
&lt;p&gt;Overall, Kaori is a queen and only deserves the best.&lt;/p&gt;
&lt;h3&gt;Shohei Matsuzaki, 25, actor/writer&lt;/h3&gt;
&lt;p&gt;Initial impression: cocky, good listener, somehow gives the best life advice.&lt;/p&gt;
&lt;p&gt;He&apos;s really opinionated in his ideas about work and living his own life that I really respect, but he&apos;s awful at articulating his arguments. I went into the tempura incident on his side, but the panel eviscerated him. He definitely clashes with cultural norms. Alas, he doesn&apos;t yet have the life experience to back up some of his talk.&lt;/p&gt;
&lt;p&gt;Still, he&apos;s a good listener, and I constantly see him taking in what others are saying and giving really good life advice that aren&apos;t just pre-canned platitudes.&lt;/p&gt;
&lt;p&gt;I also love how good he is at cooking! Notable dishes include his green curry and lu rou fan. They looked straight out of a restaurant. Maybe if acting doesn&apos;t work out for him, he can become a chef.&lt;/p&gt;
&lt;h3&gt;Haruka Okuyama, 24, actress&lt;/h3&gt;
&lt;p&gt;Initial impression: haughty, conniving, wears her heart on her sleeve.&lt;/p&gt;
&lt;p&gt;For someone who&apos;s an actress, Haruka is really bad at hiding her emotions. Every time the camera zooms in on her face, her little mouth movements just give away what she&apos;s thinking so easily, which is really cute. She reminded me of Natsumi from &quot;Boys &amp;#x26; Girls in the City&quot; (BGITC) based on appearances, but she pulled a Tap (also BGITC) and totally called Shohei out in the Tempura Incident.&lt;/p&gt;
&lt;p&gt;Her moderate success in acting doesn&apos;t necessarily result in her directly bragging about things, but she&apos;ll definitely humblebrag or argue her views with others. I&apos;m also not a fan of how she always tries to (even admits this in an interview) go after men who are already spoken for.&lt;/p&gt;
&lt;h3&gt;Kenji &quot;Kenny&quot; Yoshihara, 31, musician&lt;/h3&gt;
&lt;p&gt;Initial impression: cool, emotionally distant, kinda worthless and maybe self-serving.&lt;/p&gt;
&lt;p&gt;Kenny definitely came off as the cool dude early on. His success as a musician made a big first impression.&lt;/p&gt;
&lt;p&gt;However, as Part 1 went on, it seemed like he was coasting and just trying to promote his band. He said he was looking to be more open about his love and relationships on Day 1, but he hasn&apos;t been proactive at all with any of the girls.&lt;/p&gt;
&lt;p&gt;The advice he gives is also so shallow, word for word: &quot;Don&apos;t worry about it, everything will work out.&quot; He has zero chemistry with the women and is getting by on his (arguably) good looks and music.&lt;/p&gt;
&lt;p&gt;It hurts me that I really like his music when he&apos;s such a trash cast member right now. In cases like these, I wish the producers could force people to leave sooner.&lt;/p&gt;
&lt;h3&gt;Risako Tanabe, 21, fitness trainer&lt;/h3&gt;
&lt;p&gt;Initial impression: sweet, hard-working, straightforward.&lt;/p&gt;
&lt;p&gt;She came off as very fun-loving and hard-working initially. It wasn&apos;t until later that she revealed a cattier, more vindictive side. Despite the age difference, she&apos;s really good at getting under Haruka&apos;s skin and stirring the pot. She goes on the offensive a lot when it comes to date planning, but even she&apos;s starting to get annoyed by Kenny&apos;s uselessness.&lt;/p&gt;
&lt;p&gt;She definitely reminded me that first impressions aren&apos;t everything.&lt;/p&gt;
&lt;h3&gt;Ruka Nishinori, 20, part-time retail worker&lt;/h3&gt;
&lt;p&gt;Initial impression: pure, cute.&lt;/p&gt;
&lt;p&gt;He turns red whenever he talks to women, and really seemed to capture everyone&apos;s heart at first. But as the show went on, the sheen wore off, and everyone&apos;s over him. He&apos;s really one-dimensional at this point and truly aimless in life.&lt;/p&gt;
&lt;p&gt;At first, he wanted to be a hero, then he clarified that to mean starring in a Marvel movie. But he won&apos;t take any steps toward that goal. Then he crushes on Kaori so he wants to learn how to draw. Just... get him off the show please.&lt;/p&gt;
&lt;p&gt;He&apos;s the best argument against not having really young people who aren&apos;t established yet. There are obviously exceptions like Yusuke Aizawa and Risako Tanabe who are actually talented or know what they&apos;re doing in life.&lt;/p&gt;
&lt;h2&gt;Highlights&lt;/h2&gt;
&lt;p&gt;Tempura Incident was great. Two clashing ideologies of traditional versus new age. It totally reminded me of the Dream Police incident in BGITC, although Haruka didn&apos;t catch as much flak as Tap did.&lt;/p&gt;
&lt;p&gt;Shohei&apos;s random gig in a softcore porno. Just WHAT. No one on the panel said a thing about that pretty explicit scene was wild to me. I&apos;ll just say... if that scene was indiciative of Shohei&apos;s acting chops... he should change careers while he can. I was watching this on a plane and had to hold my phone up to my face like a pair of blinders so people wouldn&apos;t see what was happening.&lt;/p&gt;
&lt;p&gt;Risako versus Haruka, another iconic clash. Haruka may have the upper hand when it comes to work-related topics, but Risako deftly matched her when it comes to interpersonal conflict and trolling.&lt;/p&gt;
&lt;p&gt;Ruka cooking carbonara and cracking an egg into a pot of boiling water was priceless. Haruka and Kaori just chuckling in silence was such a mood.&lt;/p&gt;
&lt;p&gt;The return of Yusuke Aizawa and his ukelele was awesome. I love his music and how he just went for it with Haruka. I hope to see him back with Haruka on their rain-checked date.&lt;/p&gt;
&lt;p&gt;Kaori&apos;s vulnerable scene where she questioned her ability as an artist was so heart wrenching. Her imposter syndrome is so relatable. I&apos;m definitely rooting for her to come back even stronger.&lt;/p&gt;
&lt;p&gt;Once again, every studio segment was great. I need to find a super cut, because they were all laugh-out-loud funny.&lt;/p&gt;
&lt;h2&gt;Final thoughts&lt;/h2&gt;
&lt;p&gt;In the early episodes, the cast had such great chemistry. Everyone was vibing and getting along. It wasn&apos;t until halfway through that the cracks really started to show: unrequited love, love triangles, and useless members.&lt;/p&gt;
&lt;p&gt;The chemistry I thought was so great only goes as deep as friendship. Unfortunately, I can&apos;t really see any of them in relationships.&lt;/p&gt;
&lt;p&gt;I was shipping Kenny and Kaori based on their great conversations early on, but now I see that Kaori is waaaay too good for him. Risako is doing well for herself and deserves much better than the guys on the show. She and Haruka are also a good source of drama, so they can stay. Shohei is the house cook, so he obviously can&apos;t leave. That means Kenny and Ruka need to GTFO.&lt;/p&gt;
&lt;p&gt;It&apos;s time to bring in someone new. I can&apos;t wait to see what Part 2 brings!&lt;/p&gt;
&lt;p&gt;Note to self: Get images in here, but not so many that Netflix will DMCA me.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Introducing useStateSafely]]></title><description><![CDATA[A custom hook for setting state without memory leaks. If you just want to see the custom hook implementation in action, check out this Code…]]></description><link>https://jeffchheng.github.io/brains-base/2019-08-02-usestatesafely/</link><guid isPermaLink="false">https://jeffchheng.github.io/brains-base/2019-08-02-usestatesafely/</guid><pubDate>Fri, 02 Aug 2019 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;A custom hook for setting state without memory leaks.&lt;/p&gt;
&lt;p&gt;If you just want to see the custom hook implementation in action, &lt;a href=&quot;https://codesandbox.io/embed/ecstatic-hooks-nd0ky&quot;&gt;check out this Code Sandbox&lt;/a&gt;. Otherwise, read on for my ramblings on the problem space and path to a solution.&lt;/p&gt;
&lt;h2&gt;The problem&lt;/h2&gt;
&lt;p&gt;We&apos;ve all seen this error before:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Warning: Can&amp;#39;t perform a React state update on an
unmounted component. This is a no-op, but it indicates
a memory leak in your application. To fix, cancel all
subscriptions and asynchronous tasks in a useEffect
cleanup function.
    in SomeComponent (created by App)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Whether it&apos;s due to a &lt;code class=&quot;language-text&quot;&gt;setTimeout&lt;/code&gt; or a Promise resolving too late, it happens. There are already a few solutions out there to fix this.&lt;/p&gt;
&lt;p&gt;For example, when implementing setState in a &lt;a href=&quot;https://jeffchheng.github.io/brains-base/2019-06-12-data-fetching-with-hooks/&quot;&gt;custom hook for data fetching&lt;/a&gt;, you need to set a boolean and check before setting state. This will prevent setStates when props have changed &lt;em&gt;and&lt;/em&gt; component unmount.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; shouldRun &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ok&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;not ok&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; shouldRun &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; shouldRun &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    shouldRun &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In a class component, you can set an &lt;a href=&quot;https://reactjs.org/blog/2015/12/16/ismounted-antipattern.html&quot;&gt;instance variable&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_mounted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/api/v1/users&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ok&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;not ok&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_mounted &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_mounted &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentWillUnmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_mounted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fairly similar. Reusing the class version is more difficult, but it&apos;s easier to access to any mutable variable for the component instance through &lt;code class=&quot;language-text&quot;&gt;this&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;But in the end, it&apos;s the same principal that will allow for implementing a safe version of &lt;code class=&quot;language-text&quot;&gt;useState&lt;/code&gt; that can be arbitrarily called at any point in time, whether that&apos;s through a outstanding network request, or some errant &lt;code class=&quot;language-text&quot;&gt;setTimeout&lt;/code&gt;. That is, we need a variable to keep track of whether a component is still mounted.&lt;/p&gt;
&lt;p&gt;That&apos;s where &lt;a href=&quot;https://reactjs.org/docs/hooks-faq.html#is-there-something-like-instance-variables&quot;&gt;refs&lt;/a&gt; come in. On component mount, you can initialize the ref to &lt;code class=&quot;language-text&quot;&gt;true&lt;/code&gt;, an analog to &lt;code class=&quot;language-text&quot;&gt;this._mounted = true&lt;/code&gt;. Then, on unmount, you can set the ref to &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt;, the equivalent of &lt;code class=&quot;language-text&quot;&gt;this._mounted = false;&lt;/code&gt;. Putting this together...&lt;/p&gt;
&lt;h2&gt;The solution: useStateSafely!&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useStateSafely&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;initialValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setValue&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;initialValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; isSafe &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useRef&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// Future proofing for double-invoking&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// effects in Strict Mode.&lt;/span&gt;
    isSafe&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      isSafe&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;setValueSafely&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;newValue&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isSafe&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setValueSafely&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This has the same public API as useState*, but will not log an error when you attempt to setState on an unmounted component because this custom hook won&apos;t let it happen.&lt;/p&gt;
&lt;p&gt;(*setState will log an error if you pass in more than one arg, but effectively the same outcome. Feel free to change &lt;code class=&quot;language-text&quot;&gt;newValue&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;...args&lt;/code&gt; to more accurately simulate setState.)&lt;/p&gt;
&lt;h2&gt;Where would I use this?&lt;/h2&gt;
&lt;p&gt;There are a couple use cases, I think.&lt;/p&gt;
&lt;p&gt;If you&apos;re using Redux with thunks and callbacks to setState, this&apos;ll be handy for that. Maybe you&apos;re loading something on a page, it&apos;s going to error, but the user navigates away. Maybe you don&apos;t have a library or polyfill for canceling network requests, so your callback is gonna run regardless.&lt;/p&gt;
&lt;p&gt;Using &lt;code class=&quot;language-text&quot;&gt;setTimeout&lt;/code&gt; on user interaction, like a click handler. There&apos;s probably a use case for typing in an input field, but maybe a &lt;code class=&quot;language-text&quot;&gt;useDebounce&lt;/code&gt; custom hook would fit that use case better. Included here, because why not?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useEffect &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useDebounce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; delay&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;debouncedValue&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setDebouncedValue&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;token function&quot;&gt;setDebouncedValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; delay&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;token function&quot;&gt;clearTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
		&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;setDebouncedValue&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; delay&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; debouncedValue&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Final thoughts&lt;/h2&gt;
&lt;p&gt;Even though this blog is about using &lt;code class=&quot;language-text&quot;&gt;setState&lt;/code&gt; without memory leaks, I would not recommend wholesale replacing &lt;code class=&quot;language-text&quot;&gt;useState&lt;/code&gt; with this version. It&apos;s more an escape hatch for rare cases.&lt;/p&gt;
&lt;p&gt;You should carefully consider other, better patterns for avoiding memory leaks. But sometimes, we don&apos;t have that luxury in app development, so I hope this helps in those cases.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Data fetching and debugging with React hooks]]></title><description><![CDATA[UPDATE (2019-09-18): I've published useSnapshot as a package on npm. Please check out the package, the implementation on GitHub, and/or the…]]></description><link>https://jeffchheng.github.io/brains-base/2019-06-12-data-fetching-with-hooks/</link><guid isPermaLink="false">https://jeffchheng.github.io/brains-base/2019-06-12-data-fetching-with-hooks/</guid><pubDate>Wed, 12 Jun 2019 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;UPDATE (2019-09-18): I&apos;ve published &lt;a href=&quot;https://www.npmjs.com/package/use-snapshot&quot;&gt;useSnapshot as a package on npm&lt;/a&gt;. Please check out the package, &lt;a href=&quot;https://github.com/jeffchheng/use-snapshot/blob/master/src/index.js&quot;&gt;the implementation on GitHub&lt;/a&gt;, and/or &lt;a href=&quot;https://codesandbox.io/embed/use-snapshot-demo-v3eje&quot;&gt;the Code Sandbox&lt;/a&gt; for the latest and greatest.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Hooks are the new hotness, and everyone has their own version for how to fetch data. That&apos;s the easy part. But when you&apos;re building, maintaining, and debugging an enterprise web app, the opportunity cost is likely Redux and its ecosystem. And I think I have something that puts the onus on Redux to justify itself for certain use cases.&lt;/p&gt;
&lt;p&gt;(There&apos;s no TL;DR, but if you want to get to my solution, you can just scroll to the bottom code segment. Otherwise, let me regale you with the journey of an enterprise web dev sick of using Redux for everything.)&lt;/p&gt;
&lt;p&gt;So, yes, the benefits of Redux are well documented. It has predictability, testability, and an entire ecosystem of support. When your users don&apos;t give you the best repro steps, the action log can be a lifesaver for determining the steps a user took to get into their current state. You can trace it back to the components or event handlers that triggered those actions. Having state all in one, serializable place is also fantastic for snapshotting and sending in crash logs.&lt;/p&gt;
&lt;p&gt;But sometimes, you want a scalpel, and Redux et al can feel like a jackhammer. What if you just want to fetch some state and &lt;em&gt;not&lt;/em&gt; throw it in a global store? It just needs to live as long as this component or its sub-tree does. That&apos;s where hooks come in!&lt;/p&gt;
&lt;h2&gt;Introducing useFetch!&lt;/h2&gt;
&lt;p&gt;First, let&apos;s start with a basic &lt;code class=&quot;language-text&quot;&gt;useFetch&lt;/code&gt; custom hook that just handles GETs. (There are &lt;em&gt;so&lt;/em&gt; many Medium blogs about &lt;code class=&quot;language-text&quot;&gt;useFetch&lt;/code&gt;. Although, I&apos;ve seen quite a few that have the &lt;code class=&quot;language-text&quot;&gt;setState&lt;/code&gt; memory leak.)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useEffect &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Symbol&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useFetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setData&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; shouldRun &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ok&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;not ok&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;res&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; shouldRun &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; shouldRun &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      shouldRun &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Given a truthy URL, it will attempt to fetch the data. Initially, data is &lt;code class=&quot;language-text&quot;&gt;null&lt;/code&gt; to signify loading or no request. On success, it&apos;ll set the data and return it. On error, it&apos;ll set the data as a special error Symbol that can be compared to. &lt;code class=&quot;language-text&quot;&gt;shouldRun&lt;/code&gt; is a boolean flag telling the effect whether it should call &lt;code class=&quot;language-text&quot;&gt;setData&lt;/code&gt;, because the effect could&apos;ve been re-run due to the URL changing, or the component being unmounted.&lt;/p&gt;
&lt;p&gt;Overall, this is super simple and easy to use for set-and-forget types of data.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Caveat:&lt;/em&gt; I don&apos;t know how this will play with Suspense for data fetching, but for now, this suffices for those cases we just need to get some data that isn&apos;t long for this world. I imagine it wouldn&apos;t be too difficult to transition to the Suspense API, but who knows? &lt;/p&gt;
&lt;p&gt;Here&apos;s an example implementation (imagine the active user and member list section of Discord or Slack):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; UserContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;UserProvider&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useFetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;id &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/api/v1/users/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;id&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token template-punctuation string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Loading &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Fallback &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;UserContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;UserContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ProfileBanner&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;UserProvider id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;foo&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Avatar &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Username &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Settings &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;UserProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MemberList&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; members &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; members&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;UserProvider key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; id&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Avatar &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Username &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;NowPlaying &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;UserProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;No HOCs, no action creators, no reducers, no thunks, no indirection. Just pure React. Of course, this is a contrived example of not-real code. But I wanted to demonstrate the simplicity and power of custom hooks.&lt;/p&gt;
&lt;p&gt;There&apos;s a clear parent-child relationship again with unidirectional data flow. This makes it obvious when there&apos;s a problem: it&apos;s either in the API (I hope your service teams have good logs!), the parent that fetched the data, or the child that consumed it. You have to clearly place your children inside contexts that give them the data you need; create and provide those contexts yourself, or pass them as props the old-fashioned way; or you need to lift another provider up. This explicitness eliminates some of the footguns of using Redux for data fetching. When something goes wrong, I don&apos;t have to check action creators, reducers, selectors, middlewares, custom loaders, connected components, and so on to figure out the source of the issue.&lt;/p&gt;
&lt;h2&gt;Winning hearts and minds&lt;/h2&gt;
&lt;p&gt;For me, the explicitness and fewer points of failure were enough, but that wasn&apos;t the case for others.&lt;/p&gt;
&lt;p&gt;From another dev&apos;s point of view, there&apos;s a clear opportunity cost: &quot;If I&apos;m going to be on the hook [no pun intended] for bugs in production, I want to be able to see it in the debug logs.&quot; We were so use to storing everything in one place that it was hard to give that up, even for small one-off GETs.&lt;/p&gt;
&lt;p&gt;That&apos;s a totally fair concern. This is people&apos;s money and their livelihoods on the line. It&apos;s a hard sell for someone who hasn&apos;t completely drunk the hooks kool-aid like I have. How do I alleviate that concern?&lt;/p&gt;
&lt;h2&gt;Introducing useSnapshot!&lt;/h2&gt;
&lt;p&gt;And so I set off to find a way to have my cake and eat it too. That&apos;s when I came up with the idea for a &lt;code class=&quot;language-text&quot;&gt;useSnapshot&lt;/code&gt; custom hook and a few creative uses of context to support snapshotting React state to send in our debug logs, in addition to Redux:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  useState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  useReducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  useEffect&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  useContext
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SnapshotDispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; StateSnapshot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ShouldSnapshot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SetShouldSnapshot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; initialState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; type&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;save&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;reset&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; initialState&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Wrap your app or some component near the root.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;SnapshotWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dispatch&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; initialState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;shouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SnapshotDispatch&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; dispatch &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;SetShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; setShouldSnapshot &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; shouldSnapshot &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;StateSnapshot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider value&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; state &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;StateSnapshot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SetShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;SnapshotDispatch&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Provider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;/**
 * useSnapshot will save anything available in render
 * to send in a debug log or something.
 * @param {string} key An identifier for the data.
 * @param {object} value The data to send in a debug log.
 * @param {boolean} shouldSave Specify whether the data
 *  should be saved. For example...
 * `useSnapshot(&apos;X:&apos;+url, data, data &amp;amp;&amp;amp; data.id !== props.id)`
 *  will only save the data once it has been loaded
 *  and does not match the shape you&apos;d expect.
 *  Ignore this if you&apos;d like to always save a snapshot.
 */&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useSnapshot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; shouldSave &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SnapshotDispatch&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; shouldSnapshot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shouldSnapshot &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; shouldSave &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;save&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; shouldSave&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; shouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dispatch&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Wrap your report-a-problem component (or equivalent)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// with this so that when it mounts, it will trigger&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// useSnapshot to report back its state!&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReportProblemWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SnapshotDispatch&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;StateSnapshot&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; setShouldSnapshot &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;SetShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;useEffect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setShouldSnapshot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;reset&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;setShouldSnapshot&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setShouldSnapshot&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ReportProblem stateSnapshot&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; state &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Basically, &lt;code class=&quot;language-text&quot;&gt;&amp;lt;SnapshotWrapper /&amp;gt;&lt;/code&gt; provides the app with a few functions, a boolean, and a state snapshot through &lt;a href=&quot;https://reactjs.org/docs/context.html&quot;&gt;the new Context API&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;SnapshotDispatch&lt;/code&gt; is used by &lt;code class=&quot;language-text&quot;&gt;useSnapshot&lt;/code&gt; to snapshot state. It&apos;s also used by &lt;code class=&quot;language-text&quot;&gt;&amp;lt;ReportProblemWrapper /&amp;gt;&lt;/code&gt; to reset the state when it is no longer needed.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;StateSnapshot&lt;/code&gt; is used by &lt;code class=&quot;language-text&quot;&gt;&amp;lt;ReportProblemWapper /&amp;gt;&lt;/code&gt; to pass on to your &lt;code class=&quot;language-text&quot;&gt;&amp;lt;ReportProblem /&amp;gt;&lt;/code&gt; component that sends the state off to your data store or whatever.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;SetShouldSnapshot&lt;/code&gt; is used by &lt;code class=&quot;language-text&quot;&gt;&amp;lt;ReportProblemWapper /&amp;gt;&lt;/code&gt; to tell users of &lt;code class=&quot;language-text&quot;&gt;useSnapshot&lt;/code&gt; to save their current values.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;ShouldSnapshot&lt;/code&gt; is used by &lt;code class=&quot;language-text&quot;&gt;useSnapshot&lt;/code&gt; to determine whether it should save its current value.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;With this, whenever someone fetches data through &lt;code class=&quot;language-text&quot;&gt;useFetch&lt;/code&gt; instead of a thunk, they can pair it with &lt;code class=&quot;language-text&quot;&gt;useSnapshot&lt;/code&gt; to save data to send in crash logs. Of course, you can technically save anything that&apos;s available in render, but I think saving the results of data fetching is where a lot of apprehension comes from.&lt;/p&gt;
&lt;p&gt;So, for anyone else who runs into the issue of saving React state or weaning themselves off Redux, I hope this helps. :)&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Hello World]]></title><description><![CDATA[Welcome to my blog where I'll ramble about web dev, video games, and TV. Will anyone read this? Who knows... Maybe this'll be a good place…]]></description><link>https://jeffchheng.github.io/brains-base/2019-06-05-hello-world/</link><guid isPermaLink="false">https://jeffchheng.github.io/brains-base/2019-06-05-hello-world/</guid><pubDate>Wed, 05 Jun 2019 12:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Welcome to my blog where I&apos;ll ramble about web dev, video games, and TV. Will anyone read this? Who knows...&lt;/p&gt;
&lt;p&gt;Maybe this&apos;ll be a good place to catalog my thoughts and see how they change over time. Considering how quickly the web moves, I&apos;ll probably end up with egg on my face, but it&apos;ll be a good time capsule to look back on. Already, what I thought was best practice in 2018 hadn&apos;t necessarily translated into 2019, and it certainly won&apos;t be the same in 2020.&lt;/p&gt;
&lt;p&gt;Nah, I&apos;ll just delete the posts where I look stupid. 😏 (No one look at the commit history pls.)&lt;/p&gt;</content:encoded></item></channel></rss>